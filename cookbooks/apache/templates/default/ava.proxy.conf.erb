ProxyRequests             Off
ProxyPreserveHost         On

<Proxy balancer://avacen-<%= @environ %>>
    Order allow,deny
    <% @serveripallow.each do |ip| -%>
    Allow from <%= ip %>
    <% end -%>
    
    <% @vhostCenWorkers.each do |a| -%>
    BalancerMember http://<%= "#{a}" %>:8080 route=<%= "#{a}" %>
    <% end -%>
    ProxySet stickysession=JSESSIONID
</Proxy>


<Proxy balancer://avaven-<%= @environ %>>
    Order allow,deny
    <% @serveripallow.each do |ip| -%>
    Allow from <%= ip %>
    <% end -%>

    <% @vhostVenWorkers.each do |a| -%>
    BalancerMember http://<%= "#{a}" %>:8080 route=<%= "#{a}" %>
    <% end -%>
    ProxySet stickysession=JSESSIONID
</Proxy>

<Location /ava-rp>
<LimitExcept POST GET>
  Order allow,deny
  Deny from all
</LimitExcept>

ProxyPass               balancer://avacen-<%= @environ %>/ava-rp stickysession=JSESSIONID|jsessionid
</Location>

<Location /ava-fp>
<LimitExcept POST GET>
  Order allow,deny
  Deny from all
</LimitExcept>

ProxyPass               balancer://avacen-<%= @environ %>/ava-fp stickysession=JSESSIONID|jsessionid
</Location>

<Location /ava-vp>
<LimitExcept POST GET>
  Order allow,deny
  Deny from all
</LimitExcept>

ProxyPass               balancer://avaven-<%= @environ %>/ava-vp stickysession=JSESSIONID|jsessionid
</Location>

<Location /ava-reg>
<LimitExcept POST GET>
  Order allow,deny
  Deny from all
</LimitExcept>

ProxyPass               balancer://avaven-<%= @environ %>/ava-reg stickysession=JSESSIONID|jsessionid
</Location>

