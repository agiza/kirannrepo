#!/bin/bash

echo "Updating common repository."
if [ -f /data/yum-repo/commonwork ]; then
  echo "Common is already being replicated."
else
  touch /data/yum-repo/commonwork
  reposync -p /data/yum-repo/ --repoid=common -l
  rm -f /data/yum-repo/commonwork
fi

if [ -f /data/yum-repo/testingwork ]; then
  echo "Testing repo is already being replicated." 
else
  #echo "Updating testing repository."
  #touch /data/yum-repo/testingwork
  #reposync -p /data/yum-repo/ --repoid=testing -l
  #rm -f /data/yum-repo/testingwork
fi

if [ -f /data/yum-repo/releasework ]; then
  echo "Release repository already being replicated."
else
  echo "Updating release repository."
  touch /data/yum-repo/releasework
  reposync -p /data/yum-repo/ --repoid=release -l
  rm -f /data/yum-repo/releasework
fi

echo "Done."

