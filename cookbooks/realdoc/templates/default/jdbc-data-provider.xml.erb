<?xml version='1.0' encoding='utf-8'?>
<Context>
  <Resource name="<%= @jndi_name %>"
            auth="Container"
            type="javax.sql.DataSource"
            driverClassName="<%= @db[:driver] %>"
            url="<%= @db[:url] %>"
            username="<%= @db[:username] %>"
            password="<%= @db[:password] %>"
            maxActive="<%= node[:db_maxactive] %>"
            maxIdle="<%= node[:db_maxidle] %>"
            maxWait="<%= node[:db_maxwait] %>"
            timeBetweenEvictionRunsMillis="<%= node[:db_timeevict] %>"
            validationQuery= "<%= @db[:validation_query] %>"
            validationQueryTimeout="<%= node[:db_valquerytimeout] %>"
            initialSize="<%= node[:db_initsize] %>"
            testOnBorrow="true"
            testWhileIdle="false"
            removeAbandoned="true"
            removeAbandonedTimeout="600"
            minIdle="0"
            />
</Context>
